(this["webpackJsonpgithub-loc-rank-docs"]=this["webpackJsonpgithub-loc-rank-docs"]||[]).push([[0],{29:function(e,t,n){e.exports=n(64)},34:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),i=n.n(o),s=(n(34),n(15)),c=n(6),l=n.n(c),u=n(9),h=n(2),p=n(7),d=n(4),g=n(1),m=n(8),f=n(3),b=n(20),v=n.n(b),O=n(17),k=(n(59),"ascending"),j="descending",E=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.sortState,a=t.sort,o=t.children;if(o.toLowerCase()===n.type.toLowerCase())switch(n.direction){case k:e=k;break;case j:e=j}return r.a.createElement("span",{onClick:function(){a(o)},className:e},o)}}]),t}(a.PureComponent),y=(n(60),function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.option;return r.a.createElement("option",{value:e.name},e.name||"null"," -- ",e.count)}}]),t}(a.PureComponent)),S=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.languageList,n=e.filter;return r.a.createElement("select",{onChange:n},r.a.createElement("option",{value:"-"},"--language--"),t.map((function(e){return r.a.createElement(y,{option:e,key:e.name})})))}}]),t}(a.PureComponent),w=(n(61),function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.token,n=e.setToken,a=e.githubRequest;return r.a.createElement("div",{className:"tokenSection"},r.a.createElement("input",{type:"text",className:"tokenInput",value:t,onChange:n,placeholder:"github token"}),r.a.createElement("button",{onClick:a},"enter"))}}]),t}(a.PureComponent)),L=(n(62),function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loadding,n=e.loadMore,a=this.props.page,o=a.next,i=a.total,s=o>i;return r.a.createElement("div",{className:"loadMore"},t?r.a.createElement("div",null,r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))):1!==i?s?r.a.createElement("div",null,"last page"):r.a.createElement("button",{onClick:n},"more"):void 0)}}]),t}(a.PureComponent)),C=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.repositories,n=e.sort,a=e.filter;return r.a.createElement("tbody",null,t.filter((function(e){return"-"===a||e.mainLanguage===a})).sort((function(e,t){if(""===n.type||""===n.direction)return!0;var a=e[n.type.toLowerCase()]-t[n.type.toLowerCase()];switch(n.direction){case"ascending":a*=1;break;case"descending":a*=-1}return a})).map((function(e){return r.a.createElement("tr",{key:e.repoName},r.a.createElement("td",null,r.a.createElement("a",{href:e.htmlUrl},e.repoName)),r.a.createElement("td",null,e.mainLanguage||"-"),r.a.createElement("td",null,e.loc),r.a.createElement("td",null,e.stars))})))}}]),t}(a.PureComponent);var x=function(e){var t=Object(s.a)(new Set(e.map((function(e){return e.mainLanguage})))).map((function(t){return{name:t,count:e.filter((function(e){return e.mainLanguage===t})).length}}));return t.sort((function(e,t){return t.count-e.count})),t},N=(n(63),function(e){function t(e){var n;Object(h.a)(this,t),n=Object(d.a)(this,Object(g.a)(t).call(this,e));var a=JSON.parse(localStorage.getItem("token"))||"",r=JSON.parse(localStorage.getItem("page"))||{next:1,total:1},o=JSON.parse(localStorage.getItem("repositories"))||[],i=JSON.parse(localStorage.getItem("languageList"))||[],s=null;return a&&0!==o.length&&(s=new v.a).restore({page:r,token:a}),n.state={filter:"-",sort:{type:"",direction:""},loadding:!1,token:a,repositories:o,page:r,languageList:i,githubLOC:s},n.sort=n.sort.bind(Object(m.a)(n)),n.filter=n.filter.bind(Object(m.a)(n)),n.setToken=n.setToken.bind(Object(m.a)(n)),n.githubRequest=n.githubRequest.bind(Object(m.a)(n)),n.loadMore=n.loadMore.bind(Object(m.a)(n)),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;["token","page","repositories","languageList"].forEach((function(t){localStorage.setItem(t,JSON.stringify(e.state[t]))}))}},{key:"sort",value:function(e){var t;this.state.sort.type===e?"ascending"===this.state.sort.direction?t="descending":"descending"===this.state.sort.direction&&(t="ascending"):this.state.sort.type!==e&&(t="ascending"),this.setState({sort:{type:e,direction:t}})}},{key:"filter",value:function(e){this.setState({filter:e.target.value})}},{key:"setToken",value:function(e){this.setState({token:e.target.value})}},{key:"githubRequest",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,o,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new v.a,e.prev=1,this.setState({loadding:!0}),e.next=5,t.init(this.state.token);case 5:n=e.sent,a=n.nextPage,r=n.pageLength,o=n.data,this.setState({loadding:!1}),s=x(i=o),O.a.success("token added"),this.setState({githubLOC:t,repositories:i,languageList:s,page:{next:a,total:r}}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),O.a.error("invalid token or failed network"),console.error(e.t0);case 20:case"end":return e.stop()}}),e,this,[[1,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadMore",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({loadding:!0}),e.next=4,this.state.githubLOC.load();case 4:t=e.sent,n=t.nextPage,a=t.pageLength,r=t.data,o=[].concat(Object(s.a)(this.state.repositories),Object(s.a)(r)),i=x(o),this.setState({repositories:o,languageList:i,page:{next:n,total:a},loadding:!1}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),O.a.error("invalid token or failed network"),console.error(e.t0),this.setState({loadding:!1});case 18:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement(w,{token:this.state.token,setToken:this.setToken,githubRequest:this.githubRequest}),r.a.createElement("div",{className:"tableContent"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"reponame"),r.a.createElement("th",null,r.a.createElement(S,{languageList:this.state.languageList,filter:this.filter})),r.a.createElement("th",null,r.a.createElement(E,{sort:this.sort,sortState:this.state.sort},"LOC")),r.a.createElement("th",null,r.a.createElement(E,{sort:this.sort,sortState:this.state.sort},"Stars")))),r.a.createElement(C,{repositories:this.state.repositories,sort:this.state.sort,filter:this.state.filter}))),r.a.createElement(L,{loadding:this.state.loadding,page:this.state.page,loadMore:this.loadMore}))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.aec8e468.chunk.js.map